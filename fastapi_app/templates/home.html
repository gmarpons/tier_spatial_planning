{% extends "layout.html" %} {% block content %}

<div class="home-container">
  <!-- spinner representing the loading -->
  <div id="loading" style="display: none;">
    <img id="img-spinner" src="fastapi_app/static/images/loading.gif" alt=" loading" />
  </div>

  <!-- information about the tool (the headear) -->
  <div class="box-header grid-x">
    <!-- texts -->
    <div class="cell small-9 grid-y" style="line-height: 4px">
      <span class="application_title cell shrink">PYNEST: Python-Based Network and Energy Supply Optimization
        Tool</span>
      <span class="application_subtitle cell shrink">Application: Off-Grid Electricity Supply Systems in Nigeria</span>
      <span class="application_subtitle cell shrink">Developed by: Reiner Lemoine Institute gGmbH & TU Berlin, Institute
        for Energy Engineering</span>
      <span class="application_subtitle cell shrink">Sponsored by: The German Federal Ministry of Education and Research
        (BMBF)</span>
    </div>
    <!-- logos -->
    <div class="logo-box cell small-1 align-middle grid-padding-x">
      <img class="logo" src={{ url_for('static', path='images/LogoRLI.png' ) }} alt="RLI logo" />
    </div>
    <div class="logo-box cell small-1 align-middle grid-padding-x">
      <img class="logo" src={{ url_for('static', path='images/LogoTUB.png' ) }} alt="TUB logo" />
    </div>
    <div class="logo-box cell small-1 align-middle grid-padding-x">
      <img class="logo" src={{ url_for('static', path='images/LogoBMBF.png' ) }} alt="BMBF logo" />
    </div>
  </div>

  <!-- main body including the sidebar and the map -->
  <div class="box-body grid-x">

    <!-- sidebar: nodes, costs, settings, and import/export -->
    <div class="sidebar-general cell small-3 grid-y">

      <!-- sidebar: nodes -->
      <div class="sidebar-box cell small-10 grid-y align-middel">
        <div class="sidebar-box-title cell shrink">NODES</div>
        <div class="sidebar-box-text cell shrink" style="height: 4vh;">
          <!-- sidebar/nodes: drawing boundaries -->
          <input type="radio" id="radio_button_nodes_boundaries" checked name="radio_button_nodes"
            onclick="setMapClickEvent('boundary');"><label for="radio_button_nodes_boundaries"><strong>Specifying
              Boundaries:</strong></label>
          <div class="sidebar-box-text cell shrink grid-x grid-margin-x" style="height: 3vh;">
            <div class="cell small-6 small-offset-1">Adding Nodes</div>
            <div class="cell small-5">
              <button id="button_draw_boundaries_add" class="ui button sidebar-button primary"
                onclick="selectBoundariesAdd()">Draw Lines</button>
            </div>
          </div>
          <div class="sidebar-box-text cell shrink grid-x grid-margin-x">
            <div class="cell small-6 small-offset-1">Removing Nodes</div>
            <div class="cell small-5">
              <button id="button_draw_boundaries_remove" class="ui button sidebar-button primary"
                onclick="selectBoundariesRemove()">Draw Lines</button>
            </div>
          </div>
          <!-- sidebar/nodes: adding nodes to the map manually -->
          <input type="radio" id="radio_button_nodes_manually" name="radio_button_nodes" value="-"
            onclick="setMapClickEvent('node');"><label for="radio_button_nodes_manually"><strong>Adding Nodes
              Manually</strong></label>
          <div class="sidebar-box-text cell shrink small-offset-1">
            <input type="radio" id="radio_button_node_high_demand" disabled name="radio_button_nodes_manually"
              value="high_demand" onclick="setMapClickEvent('node');"><label for="radio_button_node_high_demand"
              title="High-Demand Consumers"><img src={{ url_for('static', path='images/markers/markerHighDemand.png' )
                }} alt="marker_high_demand" width="20"></label>
            <input type="radio" id="radio_button_node_medium_demand" disabled name="radio_button_nodes_manually"
              value="medium_demand" onclick="setMapClickEvent('node');"><label for="radio_button_node_medium_demand"
              title="Medium-Demand Consumers"><img src={{ url_for('static', path='images/markers/markerMediumDemand.png'
                ) }} alt="marker_medium_demand" width="20"></label>
            <input type="radio" id="radio_button_node_low_demand" disabled name="radio_button_nodes_manually"
              value="low_demand" onclick="setMapClickEvent('node');"><label for="radio_button_node_low_demand"
              title="Low-Demand Consumers">
              <img src={{ url_for('static', path='images/markers/markerLowDemand.png' ) }} alt="marker_low_demand"
                width="20"></label>
            <input type="radio" id="radio_button_node_pole" disabled name="radio_button_nodes_manually" value="pole"
              onclick="setMapClickEvent('node');"><label for="radio_button_node_pole" title="Poles">
              <img src={{ url_for('static', path='images/markers/markerPole.png' ) }} alt="marker_pole"
                width="20"></label>
          </div>
        </div>
      </div>



      <div class="mg_component_price_input sidebar-box cell shrink">
        <legend class="sidebar-box-title mg_component_prices_title">MG node prices</legend>
        <p class="name_component_1">Hub</p>
        <input id="price_meterhub" class="input_sidebar input_component_1" name="price_meterhub" type="number"
          placeholder="price_meterhub" value="500000" />
        <p class="name_currency_1">₦</p>
        <p class="name_component_2">Household</p>
        <input id="price_household" class="input_sidebar input_component_2" name="price_household" type="number"
          placeholder="price_household" value="200000" />
        <p class="name_currency_2">₦</p>
      </div>
      <div class="mg_component_price_input sidebar-box cell shrink">
        <legend class="sidebar-box-title mg_component_prices_title">MG cable prices</legend>
        <p class="name_component_1">Interhub</p>
        <input id="price_interhub_cable" class="input_sidebar input_component_1" name="price_interhub_cable"
          type="number" placeholder="price_interhub_cable" value="2000" />
        <p class="name_currency_1">₦/m</p>
        <p class="name_component_2">Distribution</p>
        <input id="price_distribution_cable" class="input_sidebar input_component_2" name="price_distribution_cable"
          type="number" placeholder="price_distribution_cable" value="750" />
        <p class="name_currency_2">₦/m</p>
      </div>
      <!-- <div class="box_add_node sidebar-box cell shrink grid-y">
        <legend class="sidebar-box-title cell small-3">Add new node</legend>
        <div class="cell small-9">
          <input type="radio" name="radio_button_new_node_type" value="undefined" checked id="new_node_undefined"
            onclick="setMapClickEventToAddNode();"><label for="new_node_undefined">undefined</label>
          <input type="radio" name="radio_button_new_node_type" value="household" id="new_node_household"
            onclick="setMapClickEventToAddNode();"><label for="new_node_household">household <img src={{
              url_for('static', path='images/markers/MarkerHousehold.png' ) }} alt="marker_household"
              width="18"></label>
          <input type="radio" name="radio_button_new_node_type" value="meterhub" id="new_node_meterhub"
            onclick="setMapClickEventToAddNode();"><label for="new_node_meterhub">meterhub <img src={{ url_for('static',
              path='images/markers/marker-hub.png' ) }} alt="marker_hub" width="12"></label>
        </div>
      </div> -->
      <!-- <div class="shs_identification sidebar-box cell small-3">
        <div class="box_shs_identification grid-y">
          <legend class="cell small-2 sidebar-box-title">Solar Home Sytem Identification</legend>
          <div class="cell small-2 grid-x">
            <p class="cell small-6">Cable price</p>
            <input id="cable_price_per_meter_for_shs_mst_identification" class="cell small-4 input_sidebar"
              name="cable_price_per_meter_for_shs_mst_identification" type="number"
              placeholder="cable_price_per_meter_for_shs_mst_identification" value="1000" />
            <p class="cell small-2">₦</p>
          </div>
          <div class="cell small-2 grid-x">
            <p class="cell small-6">Connection</p>
            <input id="additional_connection_price_for_shs_mst_identification" class="cell small-4 input_sidebar"
              name="additional_connection_price_for_shs_mst_identification" type="number"
              placeholder="additional_connection_price_for_shs_mst_identification" value="0" />
            <p class="cell small-2">₦</p>
          </div>
          <div id="shs_price_characteristics_box" class="cell small-2 grid-y">
            <div class="buttton_display_shs_price_characteristics">
              <button id="set_shs_price_characteristics" class="ui button sidebar-button"
                onclick="displayShsCharacteristicsInput()">Set SHS price Characteristics</button>
            </div>
            <div id="shs_inputs">
              <div id="shs-content-box-0" class="shs-content-box grid-x cell small-2">
                <input class="cell small-3" placeholder="capacity" type="number" id="shs_capacity_0" value="100"
                  min="0" />
                <p class="cell small-1">kWh</p>
                <input class="cell small-3" placeholder="max power" type="number" id="shs_max_power_0" value="200"
                  min="0" />
                <p class="cell small-1">W</p>
                <input id="shs_price_0" class="cell small-3" placeholder="price" type="number" value="20000" min="0" />
                <p class="cell small-1">₦</p>
              </div>

              <div id="shs-content-box-1" class="shs-content-box grid-x cell small-2">
                <input class="cell small-3" placeholder="capacity" type="number" id="shs_capacity_1" min="0" />
                <p class="cell small-1">kWh</p>
                <input class="cell small-3" placeholder="max power" type="number" id="shs_max_power_1" min="0" />
                <p class="cell small-1">W</p>
                <input id="shs_price_1" class="cell small-3" placeholder="price" type="number" min="0" />
                <p class="cell small-1">₦</p>
              </div>

              <div id="shs-content-box-2" class="shs-content-box grid-x cell small-2">
                <input class="cell small-3" placeholder="capacity" type="number" id="shs_capacity_2" min="0" />
                <p class="cell small-1">kWh</p>
                <input class="cell small-3" placeholder="max power" type="number" id="shs_max_power_2" min="0" />
                <p class="cell small-1">W</p>
                <input id="shs_price_2" class="cell small-3" placeholder="price" type="number" min="0" />
                <p class="cell small-1">₦</p>
              </div>

              <div id="shs-content-box-3" class="shs-content-box grid-x cell small-2">
                <input class="cell small-3" placeholder="capacity" type="number" id="shs_capacity_3" min="0" />
                <p class="cell small-1">kWh</p>
                <input class="cell small-3" placeholder="max power" type="number" id="shs_max_power_3" min="0" />
                <p class="cell small-1">W</p>
                <input id="shs_price_3" class="cell small-3" placeholder="price" type="number" min="0" />
                <p class="cell small-1">₦</p>
              </div>
              <button class="button" id="hide_shs_characteristics_inputs"
                onclick="displayShsCharacteristicsInput()">Close</button>
            </div>
          </div>

          <div class="cell small-2">
            <button id="button_identify_shs" class="ui button sidebar-button" onclick="identify_shs()">Identify
              SHS</button>
          </div>

        </div>
      </div> -->
      <div class="sidebar-box cell small-2">
        <div class="box_left_sidebar">
          <legend class="cell small-2 sidebar-box-title">Network Optimization</legend>
          <div class="cell small-2 grid-x">
            <p class="cell small-6">Relaxation Steps</p>
            <input id="number_of_relaxation_steps_nr" class="cell small-4 input_sidebar"
              name="number_of_relaxation_steps_nr" type="number" placeholder="number_of_relaxation_steps_nr" value="10"
              min="0" step="1" />
          </div>
          <button id="button_optimize" class="ui button sidebar-button" onclick="optimize_grid()">Optimize</button>
        </div>
      </div>
    </div>

    <!-- map -->
    <div class="box-map map cell small-9">
      <div id="leafletMap"></div>
    </div>
  </div>

  <div class="import-export">
    <button class="button" id="export-button" onclick="generateExportFile()">Export</button>
    <input id="config_import" name="config_import" type="file">
    <button class="button" id="import-button" onclick="importConfig(false)">Import without settings</button>
    <button class="button" id="import-button" onclick="importConfig(true)">Import with settings</button>

  </div>


  <div class="box-table-nodes table_nodes">
    <legend>Nodes table</legend>
    <div class="nodes_table">
      <div class="new_node_params">
        <div id="node_input_box">
          <div class="ui input">
            <input id="new_node_lat" name="Latitude" type="number" placeholder="Latitude" value="" />
          </div>

          <div class="ui input">
            <input id="new_node_long" name="Longitude" type="number" placeholder="Longitude" value="" />
          </div>
          <div class="ui input">
            <input id="new_node_type" name="Node Type" type="text" placeholder="Node Type" value="undefined" />
          </div>
          <div class="ui input">
            <input id="new_node_type_fixed" name="Type Fixed" type="boolean" placeholder="Type Fixed" value="false" />
          </div>
          <button id="button_add_node" type="submit" class="ui button primary">
            Add Node
          </button>
        </div>
      </div>

      <button id="button_clear_node_db" type="submit" class="ui button primary" onclick="clear_node_db();">
        Clear Nodes
      </button>
      <table id="table_nodes">
        <thead>
          <tr>
            <th>Index</th>
            <th>Latitude</th>
            <th>Longitude</th>
            <th>Area</th>
            <th>Node Type</th>
            <th>Type Fixed</th>
            <th>Required Capacity</th>
            <th>Max Power</th>
          </tr>
        </thead>
        <tbody id="tbody_nodes"></tbody>
      </table>
    </div>
  </div>
  <div class="box-table-links table_links">
    <legend>Links table</legend>
    <div class="links_table">
      <table id="table_links">
        <thead>
          <tr>
            <th>Index</th>
            <th>Latitude from</th>
            <th>Longitude from</th>
            <th>Lattitude to</th>
            <th>Longitude to</th>
            <th>Type</th>
            <th>Distance</th>
          </tr>
        </thead>
        <tbody id="tbody_links"></tbody>
      </table>
    </div>
  </div>
</div>

<script src={{ url_for('static', path='js/interactions.js' ) }}></script>
<script src={{ url_for('static', path='js/map.js' ) }}></script>
<script src={{ url_for('static', path='js/import_export.js' ) }}></script>
{% endblock %}